---
id: search-chunks-api-v-1-rag-chunks-post
title: "Search Chunks"
description: "Search for chunks based on a query."
sidebar_label: "Search Chunks"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/captide-rest-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Search Chunks"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/v1/rag/chunks"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Search for chunks based on a query.

Request body:
- **query**: The search query (required)
- **tickers**: Optional list of ticker symbols to filter documents by. If unsure about available tickers, 
             you can use the `/companies` endpoint to retrieve a list of all available companies and their tickers,
             or just filter by a single ticker to see if it's available.
- **sourceType**: Optional source type(s) to include (available options: '10-K', '10-Q', '8-K', '20-F', '40-F', '6-K', 'transcript', 'DEF 14A', etc.). 
                Can be a single string or a list of strings.
- **startDate**: Optional start date for document filtering (format: YYYY-MM-DD)
- **endDate**: Optional end date for document filtering (format: YYYY-MM-DD)
- **sourceLink**: Optional source link(s) to search within. Can be a single string or a list of strings. 
                No other documents will be queried by the agent but these. Use to restrict the search to 
                user-selected documents.

Returns chunks that are most relevant to the query.

Note: This endpoint returns the same chunks that are used internally by the `/agent-query` endpoint.
Each chunk contains metadata including `id` and `sourceLink` which should be preserved and returned
when implementing custom answer generation based on these chunks. These fields are essential for 
proper source linking in the frontend using the Captide.js library (https://github.com/captide-tech/captidejs#readme),
which allows users to view and highlight the original document sources.

*Note: All JSON fields use camelCase naming convention.*

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"properties":{"query":{"type":"string","title":"Query","description":"The query to ask the agent","example":"What are the key risks mentioned in the latest 10-K?"},"tickers":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tickers","description":"List of ticker symbols to filter documents by (e.g., ['AAPL', 'MSFT']). Check the '/companies' endpoint for available tickers.","example":["AAPL","MSFT"]},"sourceType":{"anyOf":[{"type":"string"},{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Sourcetype","description":"Source type(s) to include. Available options: 10-K, 10-Q, 8-K, 20-F, 40-F, 6-K, transcript, DEF 14A, DEFM14A, DEF 14C, DEFM14C. Can be a single string or a list of strings.","example":["10-K","10-Q"]},"start_date":{"anyOf":[{"type":"string","pattern":"^\\d{4}-\\d{2}-\\d{2}$"},{"type":"null"}],"title":"Start Date","description":"Start date for document filtering (format: YYYY-MM-DD)","example":"2022-01-01"},"end_date":{"anyOf":[{"type":"string","pattern":"^\\d{4}-\\d{2}-\\d{2}$"},{"type":"null"}],"title":"End Date","description":"End date for document filtering (format: YYYY-MM-DD)","example":"2023-12-31"},"sourceLink":{"anyOf":[{"type":"string"},{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Sourcelink","description":"Source link(s) to search within. No other documents will be queried by the agent but these. Can be a single string or a list of strings. Use to restrict the search to user-selected documents."}},"additionalProperties":true,"type":"object","required":["query"],"title":"AgentRequest","description":"Request schema for streaming RAG queries."}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"properties":{"source_chunks":{"items":{"properties":{"text":{"type":"string","title":"Text"},"text_with_ids":{"type":"string","title":"Text With Ids"},"metadata":{"type":"object","title":"Metadata"}},"additionalProperties":true,"type":"object","required":["text","text_with_ids","metadata"],"title":"SourceChunk","description":"Schema for individual chunk response."},"type":"array","title":"Source Chunks"}},"type":"object","required":["source_chunks"],"title":"ChunkSearchResponse","description":"Response schema for chunk search results."}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"properties":{"detail":{"items":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"}}}}}}
>
  
</StatusCodes>


      